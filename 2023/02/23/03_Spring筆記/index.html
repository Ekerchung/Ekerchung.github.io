<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Spring筆記 | Myblog</title>
  <meta name="keywords" content=" spring ">
  <meta name="description" content="Spring筆記 | Myblog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="踩坑紀錄問題一： 當前後分離項目要進行權限管理時，通常使用JWT來並使用Filter進行權限驗證，當完成代碼後，發現前端傳送的自定義的requestHeaders：Authorization無法由後端的request.getHeader(“Authorization”)獲取，除錯發現是因為跨域問題造成 問題二： 當後端使用過濾器進行token權限驗證，發現當登入後，進入首頁時發送axios請求的請">
<meta property="og:type" content="article">
<meta property="og:title" content="前後分離項目，JWT使用filter完成的跨域問題">
<meta property="og:url" content="https://ekerchung.github.io/2023/05/09/26_%E5%89%8D%E5%BE%8C%E5%88%86%E9%9B%A2%E9%A0%85%E7%9B%AE%EF%BC%8CJWT%E4%BD%BF%E7%94%A8filter%E5%AE%8C%E6%88%90%E7%9A%84%E8%B7%A8%E5%9F%9F%E5%95%8F%E9%A1%8C/index.html">
<meta property="og:site_name" content="Myblog">
<meta property="og:description" content="踩坑紀錄問題一： 當前後分離項目要進行權限管理時，通常使用JWT來並使用Filter進行權限驗證，當完成代碼後，發現前端傳送的自定義的requestHeaders：Authorization無法由後端的request.getHeader(“Authorization”)獲取，除錯發現是因為跨域問題造成 問題二： 當後端使用過濾器進行token權限驗證，發現當登入後，進入首頁時發送axios請求的請">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-05-08T17:10:58.686Z">
<meta property="article:modified_time" content="2023-05-09T06:59:41.685Z">
<meta property="article:author" content="Eker的編程筆記">
<meta property="article:tag" content="踩坑">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.4.2"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Eker的編程筆記</span>
</div>

<div class="icon">
    
        
    
        
            <a title="github"
               href="https://github.com/Ekerchung"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="linkedin"
               href="https://www.linkedin.com/in/yhc-b6a641155/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-linkedin"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:b8954008@gmail.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(27)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="自學筆記">
                        <i class="fold iconfont icon-right"></i>
                        
                        自學筆記
                        <small>(6)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="自學筆記<--->前端">
                                        
                                        前端
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="自學筆記<--->數據庫">
                                        
                                        數據庫
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="自學筆記<--->Spring">
                                        
                                        Spring
                                        
                                            <small>(4
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="前端">
                        <i class="fold iconfont icon-right"></i>
                        
                        前端
                        <small>(8)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="前端<--->Spring">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        Spring
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="前端<--->Spring踩坑">
                                                        
                                                        踩坑
                                                        
                                                            <small>(2)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="前端<--->Vue">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        Vue
                                        
                                            <small>(5
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="前端<--->Vue踩坑">
                                                        
                                                        踩坑
                                                        
                                                            <small>(5)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
                <li>
                    <div data-rel="後端">
                        <i class="fold iconfont icon-right"></i>
                        
                        後端
                        <small>(11)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="後端<--->Spring">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        Spring
                                        
                                            <small>(5
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="後端<--->Spring踩坑">
                                                        
                                                        踩坑
                                                        
                                                            <small>(4)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="後端<--->SpringBoot">
                                        <i class="fold iconfont icon-right"></i>
                                        
                                        SpringBoot
                                        
                                            <small>(6
                                                )</small>
                                        
                                    </div>
                                    
                                        <ul class="sub hide">
                                            
                                                <li>
                                                    <div data-rel="後端<--->SpringBoot踩坑">
                                                        
                                                        踩坑
                                                        
                                                            <small>(6)</small>
                                                        
                                                    </div>
                                                </li>
                                            
                                        </ul>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="數據庫">
                        <i class="fold iconfont icon-right"></i>
                        
                        數據庫
                        <small>(1)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="數據庫<--->踩坑">
                                        
                                        踩坑
                                        
                                            <small>(1
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  site_url"
               
               href="https://ekerchung.github.io/">About</a>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="27">
<input type="hidden" id="yelog_site_word_count" value="142.2k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>踩坑</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>axios</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hibernate</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mybatis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mybatis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MySql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>spring</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Spring</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SpringBoot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>springMVC</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Thymeleaf</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vue</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/05/09/26_%E5%89%8D%E5%BE%8C%E5%88%86%E9%9B%A2%E9%A0%85%E7%9B%AE%EF%BC%8CJWT%E4%BD%BF%E7%94%A8filter%E5%AE%8C%E6%88%90%E7%9A%84%E8%B7%A8%E5%9F%9F%E5%95%8F%E9%A1%8C/"
           data-tag="踩坑,SpringBoot"
           data-author="" >
            <span class="post-title" title="前後分離項目，JWT使用filter完成的跨域問題">前後分離項目，JWT使用filter完成的跨域問題</span>
            <span class="post-date" title="2023-05-09 01:10:58">2023/05/09</span>
        </a>
        
        
        <a  class="All 前端 Vue 踩坑 "
           href="/2023/04/29/25_Vue%E4%BD%BF%E7%94%A8Element%20UI%E6%99%82%EF%BC%8C%E6%B8%85%E7%A9%BAform%E8%A1%A8%E5%96%AE%E6%95%B8%E6%93%9A%E5%8F%8A%E6%9B%B4%E6%96%B0%E8%A1%A8%E6%A0%BC%E8%B3%87%E6%96%99%E5%95%8F%E9%A1%8C/"
           data-tag="踩坑,Vue"
           data-author="" >
            <span class="post-title" title="Vue使用Element UI時，清空form表單數據及更新表格資料問題">Vue使用Element UI時，清空form表單數據及更新表格資料問題</span>
            <span class="post-date" title="2023-04-29 01:00:54">2023/04/29</span>
        </a>
        
        
        <a  class="All 前端 Vue 踩坑 "
           href="/2023/04/29/24_Vue%E4%BD%BF%E7%94%A8Element%20UI%E6%99%82%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%B7%B1%E6%8B%B7%E8%B2%9D%E9%81%BF%E5%85%8D%E4%BF%AE%E6%94%B9%E5%BD%88%E7%AA%97%E8%B3%87%E6%96%99%E8%88%87%E8%A1%A8%E6%A0%BC%E8%B3%87%E6%96%99%E9%80%A3%E5%8B%95/"
           data-tag="踩坑,Vue"
           data-author="" >
            <span class="post-title" title="Vue使用Element UI時，使用深拷貝避免修改彈窗資料與表格資料連動">Vue使用Element UI時，使用深拷貝避免修改彈窗資料與表格資料連動</span>
            <span class="post-date" title="2023-04-29 00:28:44">2023/04/29</span>
        </a>
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/04/28/23_SpringBoot%20Data%20Jpa%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%95%B8%E6%93%9A%E5%88%B0MySql%E5%A0%B1%E9%8C%AF/"
           data-tag="踩坑,hibernate"
           data-author="" >
            <span class="post-title" title="SpringBoot Data Jpa中新增數據到MySql報錯">SpringBoot Data Jpa中新增數據到MySql報錯</span>
            <span class="post-date" title="2023-04-28 12:05:16">2023/04/28</span>
        </a>
        
        
        <a  class="All 前端 Vue 踩坑 "
           href="/2023/04/27/22_%E4%BD%BF%E7%94%A8Vuex%E4%BF%9D%E5%AD%98%E6%95%B8%E6%93%9A%E5%BE%8C%EF%BC%8C%E5%88%B7%E6%96%B0%E9%A0%81%E9%9D%A2%E5%9C%96%E8%A1%A8%E6%B8%B2%E6%9F%93%E6%B2%92%E8%B3%87%E6%96%99/"
           data-tag="踩坑,Vue"
           data-author="" >
            <span class="post-title" title="使用Vuex保存數據後，刷新頁面圖表渲染沒資料">使用Vuex保存數據後，刷新頁面圖表渲染沒資料</span>
            <span class="post-date" title="2023-04-27 15:01:48">2023/04/27</span>
        </a>
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/04/25/21_SpringBoot%20Data%20Jpa%E4%B8%AD@OneToMany%E7%9A%84Lazy%E5%8A%A0%E8%BC%89%E5%95%8F%E9%A1%8C/"
           data-tag="踩坑,hibernate"
           data-author="" >
            <span class="post-title" title="SpringBoot Data Jpa中@OneToMany的Lazy加載問題">SpringBoot Data Jpa中@OneToMany的Lazy加載問題</span>
            <span class="post-date" title="2023-04-25 01:24:36">2023/04/25</span>
        </a>
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/04/24/20_SpringBoot%20+%20Vue%E5%89%8D%E5%BE%8C%E5%88%86%E9%9B%A2%E9%A0%85%E7%9B%AE%E5%9B%9E%E5%82%B3%E6%97%A5%E6%9C%9F%E5%B7%AE%E4%B8%80%E5%A4%A9(8hr)/"
           data-tag="踩坑,Vue,hibernate"
           data-author="" >
            <span class="post-title" title="SpringBoot + Vue前後分離項目回傳日期差一天(8hr)">SpringBoot + Vue前後分離項目回傳日期差一天(8hr)</span>
            <span class="post-date" title="2023-04-24 17:29:28">2023/04/24</span>
        </a>
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/04/21/19_SpringBoot%20Data%20Jpa%20%E7%B4%9A%E8%81%AF%E6%9F%A5%E8%A9%A2%E6%AD%BB%E5%BE%AA%E7%92%B0/"
           data-tag="踩坑,hibernate"
           data-author="" >
            <span class="post-title" title="SpringBoot Data Jpa 級聯查詢死循環">SpringBoot Data Jpa 級聯查詢死循環</span>
            <span class="post-date" title="2023-04-21 17:15:51">2023/04/21</span>
        </a>
        
        
        <a  class="All 後端 SpringBoot 踩坑 "
           href="/2023/04/21/18_hibernate%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AF%A6%E9%AB%94%E9%A1%9E%E5%B0%8D%E8%B1%A1%E7%84%A1%E6%B3%95%E8%BD%89JSON%E9%9F%BF%E6%87%89%E7%B5%A6%E5%89%8D%E7%AB%AF/"
           data-tag="踩坑,hibernate"
           data-author="" >
            <span class="post-title" title="hibernate返回的實體類對象無法轉JSON響應給前端">hibernate返回的實體類對象無法轉JSON響應給前端</span>
            <span class="post-date" title="2023-04-21 01:44:46">2023/04/21</span>
        </a>
        
        
        <a  class="All 前端 Vue 踩坑 "
           href="/2023/04/19/16_Vue%20Router%E8%8F%9C%E5%96%AE%E9%87%8D%E8%A4%87%E9%BB%9E%E6%93%8A-%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%A0%B1%E9%8C%AF/"
           data-tag="踩坑,Vue"
           data-author="" >
            <span class="post-title" title="Vue Router菜單重複點擊-控制台報錯">Vue Router菜單重複點擊-控制台報錯</span>
            <span class="post-date" title="2023-04-19 11:40:28">2023/04/19</span>
        </a>
        
        
        <a  class="All 前端 Vue 踩坑 "
           href="/2023/04/18/17_%E5%9F%B7%E8%A1%8CVue%E9%A0%85%E7%9B%AE%E5%A0%B1%E9%8C%AFerror_0308010C/"
           data-tag="踩坑,Vue"
           data-author="" >
            <span class="post-title" title="執行Vue項目報錯error_0308010C">執行Vue項目報錯error_0308010C</span>
            <span class="post-date" title="2023-04-18 00:37:45">2023/04/18</span>
        </a>
        
        
        <a  class="All 自學筆記 前端 "
           href="/2023/04/17/15_Vue%E7%AD%86%E8%A8%98/"
           data-tag="Vue"
           data-author="" >
            <span class="post-title" title="Vue筆記">Vue筆記</span>
            <span class="post-date" title="2023-04-17 10:05:06">2023/04/17</span>
        </a>
        
        
        <a  class="All 自學筆記 數據庫 "
           href="/2023/04/10/14_Redis%E7%AD%86%E8%A8%98/"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis筆記">Redis筆記</span>
            <span class="post-date" title="2023-04-10 11:00:16">2023/04/10</span>
        </a>
        
        
        <a  class="All 自學筆記 Spring "
           href="/2023/03/28/13_SpringBoot%E7%AD%86%E8%A8%98/"
           data-tag="SpringBoot"
           data-author="" >
            <span class="post-title" title="SpringBoot筆記">SpringBoot筆記</span>
            <span class="post-date" title="2023-03-28 11:00:16">2023/03/28</span>
        </a>
        
        
        <a  class="All 後端 Spring 踩坑 "
           href="/2023/03/12/12_Mybatis-%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E7%94%A2%E7%94%9FMapper.xml%E6%9C%89%E8%AA%A4/"
           data-tag="Spring,踩坑,Mybatis"
           data-author="" >
            <span class="post-title" title="Mybatis-逆向工程產生Mapper.xml有誤">Mybatis-逆向工程產生Mapper.xml有誤</span>
            <span class="post-date" title="2023-03-12 00:55:45">2023/03/12</span>
        </a>
        
        
        <a  class="All 後端 Spring 踩坑 "
           href="/2023/03/10/11_Thymeleaf%E6%B8%B2%E6%9F%93%E6%95%B8%E6%93%9A%E5%BA%AB%E5%85%A7%E4%BF%9D%E5%AD%98%E7%9A%84%E6%99%82%E9%96%93/"
           data-tag="Spring,踩坑,Thymeleaf"
           data-author="" >
            <span class="post-title" title="Thymeleaf-渲染數據庫內保存的時間">Thymeleaf-渲染數據庫內保存的時間</span>
            <span class="post-date" title="2023-03-10 22:42:14">2023/03/10</span>
        </a>
        
        
        <a  class="All 數據庫 踩坑 "
           href="/2023/03/10/10_MySql%E4%BF%9D%E5%AD%98%E6%99%82%E9%96%93%E6%99%82%E5%8D%80%E5%95%8F%E9%A1%8C/"
           data-tag="踩坑,MySql"
           data-author="" >
            <span class="post-title" title="MySql-保存時間時區問題">MySql-保存時間時區問題</span>
            <span class="post-date" title="2023-03-10 22:20:25">2023/03/10</span>
        </a>
        
        
        <a  class="All 前端 "
           href="/2023/03/07/09_Vue%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9F%E7%9A%84confirm%20dialog/"
           data-tag="Vue"
           data-author="" >
            <span class="post-title" title="Vue使用原生的confirm dialog">Vue使用原生的confirm dialog</span>
            <span class="post-date" title="2023-03-07 15:37:59">2023/03/07</span>
        </a>
        
        
        <a  class="All 前端 Spring 踩坑 "
           href="/2023/03/07/08_Vue%E5%AF%A6%E7%8F%BE%E4%BD%BF%E7%94%A8%E8%B6%85%E9%80%A3%E7%B5%90%E7%99%BC%E9%80%81delete%E8%AB%8B%E6%B1%82/"
           data-tag="Spring,踩坑,Vue"
           data-author="" >
            <span class="post-title" title="Vue實現使用超連結發送delete請求">Vue實現使用超連結發送delete請求</span>
            <span class="post-date" title="2023-03-07 14:39:23">2023/03/07</span>
        </a>
        
        
        <a  class="All 前端 Spring 踩坑 "
           href="/2023/03/05/07_Vue+axios%E5%AF%A6%E7%8F%BE%E7%95%B0%E6%AD%A5%E8%AB%8B%E6%B1%82%E9%A9%97%E8%AD%89%E8%A8%BB%E5%86%8A%E8%A1%A8%E5%96%AE/"
           data-tag="Spring,踩坑,Vue,axios"
           data-author="" >
            <span class="post-title" title="Vue+axios實現異步請求驗證註冊表單">Vue+axios實現異步請求驗證註冊表單</span>
            <span class="post-date" title="2023-03-05 23:05:46">2023/03/05</span>
        </a>
        
        
        <a  class="All 後端 Spring 踩坑 "
           href="/2023/02/26/06_Spring-MySQL%E9%85%8D%E7%BD%AE%E5%A0%B1%E9%8C%AF/"
           data-tag="Spring,踩坑"
           data-author="" >
            <span class="post-title" title="Spring-MySQL配置報錯">Spring-MySQL配置報錯</span>
            <span class="post-date" title="2023-02-26 23:49:18">2023/02/26</span>
        </a>
        
        
        <a  class="All 後端 Spring 踩坑 "
           href="/2023/02/25/05_Mybatis-%E6%8F%92%E4%BB%B6mybatis-generator%E4%B8%8D%E9%A1%AF%E7%A4%BA/"
           data-tag="mybatis,Spring,踩坑"
           data-author="" >
            <span class="post-title" title="Mybatis-插件mybatis-generator不顯示">Mybatis-插件mybatis-generator不顯示</span>
            <span class="post-date" title="2023-02-25 00:28:36">2023/02/25</span>
        </a>
        
        
        <a  class="All 後端 Spring "
           href="/2023/02/23/04_SSM-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%95%B4%E5%90%88/"
           data-tag="spring,mybatis,springMVC"
           data-author="" >
            <span class="post-title" title="SSM-配置文件整合">SSM-配置文件整合</span>
            <span class="post-date" title="2023-02-23 16:39:00">2023/02/23</span>
        </a>
        
        
        <a  class="All 自學筆記 Spring "
           href="/2023/02/23/03_Spring%E7%AD%86%E8%A8%98/"
           data-tag="spring"
           data-author="" >
            <span class="post-title" title="Spring筆記">Spring筆記</span>
            <span class="post-date" title="2023-02-23 16:39:00">2023/02/23</span>
        </a>
        
        
        <a  class="All 自學筆記 Spring "
           href="/2023/02/23/02_SpringMVC%E7%AD%86%E8%A8%98/"
           data-tag="springMVC"
           data-author="" >
            <span class="post-title" title="SpringMVC筆記">SpringMVC筆記</span>
            <span class="post-date" title="2023-02-23 16:39:00">2023/02/23</span>
        </a>
        
        
        <a  class="All 自學筆記 Spring "
           href="/2023/02/23/01_Mybatis%E7%AD%86%E8%A8%98/"
           data-tag="mybatis"
           data-author="" >
            <span class="post-title" title="Mybatis筆記">Mybatis筆記</span>
            <span class="post-date" title="2023-02-23 16:39:00">2023/02/23</span>
        </a>
        
        
        <a  class="All "
           href="/2023/02/23/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2023-02-23 16:37:11">2023/02/23</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-03_Spring筆記" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Spring筆記</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="自學筆記">自學筆記</a> > 
            
            <a  data-rel="自學筆記&lt;---&gt;Spring">Spring</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color2">spring</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2023-03-28 11:45:08'>2023-02-23 16:39</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:10k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-IOC%EF%BC%88%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%89"><span class="toc-text">Spring - IOC（控制反转）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81IOC%E5%AE%B9%E5%99%A8"><span class="toc-text">一、IOC容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81IOC%E5%AE%B9%E5%99%A8-Bean%E7%AE%A1%E7%90%86"><span class="toc-text">二、IOC容器-Bean管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-IOC%E5%AE%B9%E5%99%A8-Bean%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8EXML%EF%BC%88%E7%BB%AD%E9%9B%86%EF%BC%89"><span class="toc-text">Spring IOC容器-Bean管理——基于XML（续集）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88FactoryBean%EF%BC%89"><span class="toc-text">1、IOC 操作 Bean 管理（FactoryBean）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%89"><span class="toc-text">2、IOC 操作 Bean 管理（bean 作用域）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89"><span class="toc-text">3、IOC 操作 Bean 管理（bean 生命周期）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-text">4、IOC 操作 Bean 管理(外部属性文件)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-text">IOC 操作 Bean 管理(基于注解方式)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3"><span class="toc-text">1、什么是注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81Spring-%E9%92%88%E5%AF%B9-Bean-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="toc-text">2、Spring 针对 Bean 管理中创建对象提供注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-text">3、基于注解方式实现对象创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%BB%86%E8%8A%82%E9%85%8D%E7%BD%AE"><span class="toc-text">4、开启组件扫描细节配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-text">5、基于注解方式实现属性注入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89-Autowired%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-text">（1）@Autowired：根据属性类型进行自动装配</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-Qualifier%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5%EF%BC%8C%E8%BF%99%E4%B8%AA-Qualifier-%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%92%8C%E4%B8%8A%E9%9D%A2-Autowired-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">（2）@Qualifier：根据名称进行注入，这个@Qualifier 注解的使用，和上面@Autowired 一起使用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89-Resource%EF%BC%9A%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E6%B3%A8%E5%85%A5%EF%BC%88%E5%AE%83%E5%B1%9E%E4%BA%8Ejavax%E5%8C%85%E4%B8%8B%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%8C%E4%B8%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%81%EF%BC%89"><span class="toc-text">（3）@Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%884%EF%BC%89-Value%EF%BC%9A%E6%B3%A8%E5%85%A5%E6%99%AE%E9%80%9A%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-text">（4）@Value：注入普通类型属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">6、完全注解开发</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-AOP"><span class="toc-text">Spring - AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81AOP-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1、AOP 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81AOP%EF%BC%88%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%89"><span class="toc-text">2、AOP（底层原理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81AOP%EF%BC%88JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-text">3、AOP（JDK 动态代理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81AOP%EF%BC%88%E6%9C%AF%E8%AF%AD%EF%BC%89"><span class="toc-text">4、AOP（术语）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81AOP%E6%93%8D%E4%BD%9C"><span class="toc-text">5、AOP操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-text">6、AOP 操作（AspectJ 注解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E6%9C%89%E5%A4%9A%E4%B8%AA%E5%A2%9E%E5%BC%BA%E7%B1%BB%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%EF%BC%8C%E8%AE%BE%E7%BD%AE%E5%A2%9E%E5%BC%BA%E7%B1%BB%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">7、有多个增强类对同一个方法进行增强，设置增强类优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-text">8、AOP 操作（AspectJ 配置文件）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Srping-JdbcTemplate"><span class="toc-text">Srping - JdbcTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81JdbcTemplate%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-text">1、JdbcTemplate概念及使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%B7%BB%E5%8A%A0%EF%BC%89"><span class="toc-text">2、JdbcTemplate 操作数据库（添加）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%EF%BC%89"><span class="toc-text">3、JdbcTemplate 操作数据库（修改和删除）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC%EF%BC%89"><span class="toc-text">4、JdbcTemplate 操作数据库（查询返回某个值）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%EF%BC%89"><span class="toc-text">5、JdbcTemplate 操作数据库（查询返回对象）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88%EF%BC%89"><span class="toc-text">6、JdbcTemplate 操作数据库（查询返回集合）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-text">7、JdbcTemplate 操作数据库（批量操作）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81JdbcTemplate-%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">8、JdbcTemplate 实现批量修改操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E2%80%94%E2%80%94%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-text">Spring——事务操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="toc-text">1、事务概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E6%A8%A1%E6%8B%9F%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%89"><span class="toc-text">2、事务操作（模拟事务操作环境）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88Spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D%EF%BC%89"><span class="toc-text">3、事务操作（Spring 事务管理介绍）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">4、注解声明式事务管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-text">5、事务操作（声明式事务管理参数配置）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Transactional%EF%BC%88%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%EF%BC%89"><span class="toc-text">Transactional（事务传播行为）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ioslation%EF%BC%88%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%89"><span class="toc-text">ioslation（事务隔离级别）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#timeout%EF%BC%9A%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"><span class="toc-text">timeout：超时时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#readOnly%EF%BC%9A%E6%98%AF%E5%90%A6%E5%8F%AA%E8%AF%BB"><span class="toc-text">readOnly：是否只读</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rollbackFor%EF%BC%9A%E5%9B%9E%E6%BB%9A"><span class="toc-text">rollbackFor：回滚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noRollbackFor%EF%BC%9A%E4%B8%8D%E5%9B%9E%E6%BB%9A"><span class="toc-text">noRollbackFor：不回滚</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88XML-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-text">6、事务操作（XML 声明式事务管理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-text">7、事务操作（完全注解声明式事务管理）</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class='inner-toc'><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-IOC%EF%BC%88%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC%EF%BC%89"><span class="toc-text">Spring - IOC（控制反转）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81IOC%E5%AE%B9%E5%99%A8"><span class="toc-text">一、IOC容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81IOC%E5%AE%B9%E5%99%A8-Bean%E7%AE%A1%E7%90%86"><span class="toc-text">二、IOC容器-Bean管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-IOC%E5%AE%B9%E5%99%A8-Bean%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8EXML%EF%BC%88%E7%BB%AD%E9%9B%86%EF%BC%89"><span class="toc-text">Spring IOC容器-Bean管理——基于XML（续集）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88FactoryBean%EF%BC%89"><span class="toc-text">1、IOC 操作 Bean 管理（FactoryBean）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%89"><span class="toc-text">2、IOC 操作 Bean 管理（bean 作用域）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86%EF%BC%88bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89"><span class="toc-text">3、IOC 操作 Bean 管理（bean 生命周期）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%A4%96%E9%83%A8%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6"><span class="toc-text">4、IOC 操作 Bean 管理(外部属性文件)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC-%E6%93%8D%E4%BD%9C-Bean-%E7%AE%A1%E7%90%86-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-text">IOC 操作 Bean 管理(基于注解方式)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E6%B3%A8%E8%A7%A3"><span class="toc-text">1、什么是注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81Spring-%E9%92%88%E5%AF%B9-Bean-%E7%AE%A1%E7%90%86%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E6%8F%90%E4%BE%9B%E6%B3%A8%E8%A7%A3"><span class="toc-text">2、Spring 针对 Bean 管理中创建对象提供注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA"><span class="toc-text">3、基于注解方式实现对象创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%BC%80%E5%90%AF%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E7%BB%86%E8%8A%82%E9%85%8D%E7%BD%AE"><span class="toc-text">4、开启组件扫描细节配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="toc-text">5、基于注解方式实现属性注入</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%881%EF%BC%89-Autowired%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%B1%9E%E6%80%A7%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-text">（1）@Autowired：根据属性类型进行自动装配</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%882%EF%BC%89-Qualifier%EF%BC%9A%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%85%A5%EF%BC%8C%E8%BF%99%E4%B8%AA-Qualifier-%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%8C%E5%92%8C%E4%B8%8A%E9%9D%A2-Autowired-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">（2）@Qualifier：根据名称进行注入，这个@Qualifier 注解的使用，和上面@Autowired 一起使用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%883%EF%BC%89-Resource%EF%BC%9A%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%90%8D%E7%A7%B0%E6%B3%A8%E5%85%A5%EF%BC%88%E5%AE%83%E5%B1%9E%E4%BA%8Ejavax%E5%8C%85%E4%B8%8B%E7%9A%84%E6%B3%A8%E8%A7%A3%EF%BC%8C%E4%B8%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%EF%BC%81%EF%BC%89"><span class="toc-text">（3）@Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%EF%BC%884%EF%BC%89-Value%EF%BC%9A%E6%B3%A8%E5%85%A5%E6%99%AE%E9%80%9A%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-text">（4）@Value：注入普通类型属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-text">6、完全注解开发</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-AOP"><span class="toc-text">Spring - AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81AOP-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1、AOP 基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81AOP%EF%BC%88%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%EF%BC%89"><span class="toc-text">2、AOP（底层原理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81AOP%EF%BC%88JDK-%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-text">3、AOP（JDK 动态代理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81AOP%EF%BC%88%E6%9C%AF%E8%AF%AD%EF%BC%89"><span class="toc-text">4、AOP（术语）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81AOP%E6%93%8D%E4%BD%9C"><span class="toc-text">5、AOP操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-text">6、AOP 操作（AspectJ 注解）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E6%9C%89%E5%A4%9A%E4%B8%AA%E5%A2%9E%E5%BC%BA%E7%B1%BB%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%BC%BA%EF%BC%8C%E8%AE%BE%E7%BD%AE%E5%A2%9E%E5%BC%BA%E7%B1%BB%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">7、有多个增强类对同一个方法进行增强，设置增强类优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81AOP-%E6%93%8D%E4%BD%9C%EF%BC%88AspectJ-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-text">8、AOP 操作（AspectJ 配置文件）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Srping-JdbcTemplate"><span class="toc-text">Srping - JdbcTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81JdbcTemplate%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-text">1、JdbcTemplate概念及使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%B7%BB%E5%8A%A0%EF%BC%89"><span class="toc-text">2、JdbcTemplate 操作数据库（添加）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%EF%BC%89"><span class="toc-text">3、JdbcTemplate 操作数据库（修改和删除）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E6%9F%90%E4%B8%AA%E5%80%BC%EF%BC%89"><span class="toc-text">4、JdbcTemplate 操作数据库（查询返回某个值）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%EF%BC%89"><span class="toc-text">5、JdbcTemplate 操作数据库（查询返回对象）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88%EF%BC%89"><span class="toc-text">6、JdbcTemplate 操作数据库（查询返回集合）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81JdbcTemplate-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-text">7、JdbcTemplate 操作数据库（批量操作）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81JdbcTemplate-%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">8、JdbcTemplate 实现批量修改操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E2%80%94%E2%80%94%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-text">Spring——事务操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E4%BA%8B%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="toc-text">1、事务概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E6%A8%A1%E6%8B%9F%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%89"><span class="toc-text">2、事务操作（模拟事务操作环境）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88Spring-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%BB%8B%E7%BB%8D%EF%BC%89"><span class="toc-text">3、事务操作（Spring 事务管理介绍）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">4、注解声明式事务管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-text">5、事务操作（声明式事务管理参数配置）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Transactional%EF%BC%88%E4%BA%8B%E5%8A%A1%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%EF%BC%89"><span class="toc-text">Transactional（事务传播行为）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ioslation%EF%BC%88%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%89"><span class="toc-text">ioslation（事务隔离级别）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#timeout%EF%BC%9A%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4"><span class="toc-text">timeout：超时时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#readOnly%EF%BC%9A%E6%98%AF%E5%90%A6%E5%8F%AA%E8%AF%BB"><span class="toc-text">readOnly：是否只读</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rollbackFor%EF%BC%9A%E5%9B%9E%E6%BB%9A"><span class="toc-text">rollbackFor：回滚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noRollbackFor%EF%BC%9A%E4%B8%8D%E5%9B%9E%E6%BB%9A"><span class="toc-text">noRollbackFor：不回滚</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88XML-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-text">6、事务操作（XML 声明式事务管理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%88%E5%AE%8C%E5%85%A8%E6%B3%A8%E8%A7%A3%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-text">7、事务操作（完全注解声明式事务管理）</span></a></li></ol></li></ol></div></p>
<hr>
<h2 id="Spring-IOC（控制反转）"><a href="#Spring-IOC（控制反转）" class="headerlink" title="Spring - IOC（控制反转）"></a>Spring - <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=IOC&spm=1001.2101.3001.7020">IOC</a>（控制反转）</h2><hr>
<h3 id="一、IOC容器"><a href="#一、IOC容器" class="headerlink" title="一、IOC容器"></a>一、IOC容器</h3><p><strong>1、什么是IOC（控制反转）</strong></p>
<p>a）把对象创建和对象之间的调用过程，交给Spring进行管理</p>
<p>b）使用IOC目的：为了降低<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%80%A6%E5%90%88%E5%BA%A6&spm=1001.2101.3001.7020">耦合度</a></p>
<p><strong>2、IOC底层</strong></p>
<p>a）<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=xml&spm=1001.2101.3001.7020">xml</a>解析、工厂模式、反射</p>
<p><strong>3、Spring提供的IOC容器实现的两种方式（两个接口）</strong></p>
<p>a）BeanFactory接口：IOC容器基本实现是Spring内部接口的使用接口，不提供给开发人员进行使用（加载配置文件时候不会创建对象，在获取对象时才会创建对象。）</p>
<p>b）ApplicationContext接口：BeanFactory接口的子接口，提供更多更强大的功能，提供给开发人员使用（加载配置文件时候就会把在配置文件对象进行创建）推荐使用！</p>
<p><strong>4、ApplicationContext接口的实现类（具体根据API文档查看☺）</strong></p>
<hr>
<h3 id="二、IOC容器-Bean管理"><a href="#二、IOC容器-Bean管理" class="headerlink" title="二、IOC容器-Bean管理"></a>二、IOC容器-Bean管理</h3><p><strong>1、IOC操作Bean管理</strong></p>
<p>a）Bean管理就是两个操作：（1）Spring创建对象；（2）Spring注入属性</p>
<p><strong>2、基于XML配置文件创建对象</strong></p>
<pre><code class="xml">&lt;!--1 配置User对象创建--&gt;
&lt;bean id=&quot;user&quot; class=&quot;com.atguigu.spring5.User&quot;&gt;&lt;/bean&gt;
</code></pre>
<p><strong>3、基于XML方式注入属性</strong>（DI：依赖注入（注入属性））</p>
<p>a）set方式注入</p>
<pre><code class="java">//（1）传统方式： 创建类，定义属性和对应的set方法
public class Book &#123;
        //创建属性
        private String bname;

        //创建属性对应的set方法
        public void setBname(String bname) &#123;
            this.bname = bname;
        &#125;
   &#125;
</code></pre>
<hr>
<pre><code class="xml">&lt;!--（2）spring方式： set方法注入属性--&gt;
&lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.Book&quot;&gt;
    &lt;!--使用property完成属性注入
        name：类里面属性名称
        value：向属性注入的值
    --&gt;
    &lt;property name=&quot;bname&quot; value=&quot;Hello&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;bauthor&quot; value=&quot;World&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p>b）有参构造函数注入</p>
<pre><code class="java">//（1）传统方式：创建类，构建有参函数
public class Orders &#123;
    //属性
    private String oname;
    private String address;
    //有参数构造
    public Orders(String oname,String address) &#123;
        this.oname = oname;
        this.address = address;
    &#125;
  &#125;
</code></pre>
<hr>
<pre><code class="xml">&lt;!--（2）spring方式：有参数构造注入属性--&gt;
&lt;bean id=&quot;orders&quot; class=&quot;com.atguigu.spring5.Orders&quot;&gt;
    &lt;constructor-arg name=&quot;oname&quot; value=&quot;Hello&quot;&gt;&lt;/constructor-arg&gt;
    &lt;constructor-arg name=&quot;address&quot; value=&quot;China！&quot;&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
</code></pre>
<p>c）p名称空间注入（了解即可）</p>
<pre><code class="xml">&lt;!--1、添加p名称空间在配置文件头部--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;        &lt;!--在这里添加一行p--&gt;

&lt;!--2、在bean标签进行属性注入（算是set方式注入的简化操作）--&gt;
    &lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.Book&quot; p:bname=&quot;very&quot; p:bauthor=&quot;good&quot;&gt;
    &lt;/bean&gt;
</code></pre>
<p><strong>4、注入空值和特殊符号</strong></p>
<pre><code class="xml">&lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.Book&quot;&gt;
    &lt;!--（1）null值--&gt;
    &lt;property name=&quot;address&quot;&gt;
        &lt;null/&gt;&lt;!--属性里边添加一个null标签--&gt;
    &lt;/property&gt;
    
    &lt;!--（2）特殊符号赋值--&gt;
     &lt;!--属性值包含特殊符号
       a 把&lt;&gt;进行转义 &amp;lt; &amp;gt;
       b 把带特殊符号内容写到CDATA
      --&gt;
        &lt;property name=&quot;address&quot;&gt;
            &lt;value&gt;&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;&lt;/value&gt;
        &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<hr>
<p><strong>5、注入属性-外部bean</strong></p>
<p>a）创建两个类service和dao类</p>
<pre><code class="Java">public class UserService &#123;//service类

    //创建UserDao类型属性，生成set方法
    private UserDao userDao;
    public void setUserDao(UserDao userDao) &#123;
        this.userDao = userDao;
    &#125;

    public void add() &#123;
        System.out.println(&quot;service add...............&quot;);
        userDao.update();//调用dao方法
    &#125;
&#125;

public class UserDaoImpl implements UserDao &#123;//dao类

    @Override
    public void update() &#123;
        System.out.println(&quot;dao update...........&quot;);
    &#125;
&#125;
</code></pre>
<p>b）在spring配置文件中进行配置</p>
<pre><code class="xml">&lt;!--1 service和dao对象创建--&gt;
&lt;bean id=&quot;userService&quot; class=&quot;com.atguigu.spring5.service.UserService&quot;&gt;
    &lt;!--注入userDao对象
        name属性：类里面属性名称
        ref属性：创建userDao对象bean标签id值
    --&gt;
    &lt;property name=&quot;userDao&quot; ref=&quot;userDaoImpl&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;userDaoImpl&quot; class=&quot;com.atguigu.spring5.dao.UserDaoImpl&quot;&gt;&lt;/bean&gt;
</code></pre>
<p><strong>6、基于XML方式注入内部bean和级联赋值</strong></p>
<p>a）注入属性-内部bean</p>
<blockquote>
<p>（1）一对多关系：部门和员工<br>一个部门有多个员工，一个员工属于一个部门（部门是一，员工是多）<br>（2）在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性进行表示</p>
</blockquote>
<pre><code class="java">//部门类
public class Dept &#123;
    private String dname;
    public void setDname(String dname) &#123;
        this.dname = dname;
    &#125;
&#125;

//员工类
public class Emp &#123;
    private String ename;
    private String gender;
    //员工属于某一个部门，使用对象形式表示
    private Dept dept;
    
    public void setDept(Dept dept) &#123;
        this.dept = dept;
    &#125;
    public void setEname(String ename) &#123;
        this.ename = ename;
    &#125;
    public void setGender(String gender) &#123;
        this.gender = gender;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>（3）在spring配置文件中配置</p>
</blockquote>
<pre><code class="xml">&lt;!--内部bean--&gt;
    &lt;bean id=&quot;emp&quot; class=&quot;com.atguigu.spring5.bean.Emp&quot;&gt;
        &lt;!--设置两个普通属性--&gt;
        &lt;property name=&quot;ename&quot; value=&quot;Andy&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;gender&quot; value=&quot;女&quot;&gt;&lt;/property&gt;
        &lt;!--设置对象类型属性--&gt;
        &lt;property name=&quot;dept&quot;&gt;
            &lt;bean id=&quot;dept&quot; class=&quot;com.atguigu.spring5.bean.Dept&quot;&gt;&lt;!--内部bean赋值--&gt;
                &lt;property name=&quot;dname&quot; value=&quot;宣传部门&quot;&gt;&lt;/property&gt;
            &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
</code></pre>
<hr>
<p>b）注入属性-级联赋值</p>
<pre><code class="xml">&lt;!--方式一：级联赋值--&gt;
    &lt;bean id=&quot;emp&quot; class=&quot;com.atguigu.spring5.bean.Emp&quot;&gt;
        &lt;!--设置两个普通属性--&gt;
        &lt;property name=&quot;ename&quot; value=&quot;Andy&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;gender&quot; value=&quot;女&quot;&gt;&lt;/property&gt;
        &lt;!--级联赋值--&gt;
        &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;dept&quot; class=&quot;com.atguigu.spring5.bean.Dept&quot;&gt;
        &lt;property name=&quot;dname&quot; value=&quot;公关部门&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

 //方式二：生成dept的get方法（get方法必须有！！）
    public Dept getDept() &#123;
        return dept;
    &#125;

 &lt;!--级联赋值--&gt;
    &lt;bean id=&quot;emp&quot; class=&quot;com.atguigu.spring5.bean.Emp&quot;&gt;
        &lt;!--设置两个普通属性--&gt;
        &lt;property name=&quot;ename&quot; value=&quot;jams&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;gender&quot; value=&quot;男&quot;&gt;&lt;/property&gt;
        &lt;!--级联赋值--&gt;
        &lt;property name=&quot;dept&quot; ref=&quot;dept&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;dept.dname&quot; value=&quot;技术部门&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;dept&quot; class=&quot;com.atguigu.spring5.bean.Dept&quot;&gt;
    &lt;/bean&gt;
</code></pre>
<p><strong>7、IOC 操作 Bean 管理——xml 注入集合属性</strong></p>
<blockquote>
<p>1、注入数组类型属性 2、注入 List 集合类型属性 3、注入 Map 集合类型属性</p>
</blockquote>
<pre><code class="java">//（1）创建类，定义数组、list、map、set 类型属性，生成对应 set 方法
public class Stu &#123;
    //1 数组类型属性
    private String[] courses;
    //2 list集合类型属性
    private List&lt;String&gt; list;
    //3 map集合类型属性
    private Map&lt;String,String&gt; maps;
    //4 set集合类型属性
    private Set&lt;String&gt; sets;
    
    public void setSets(Set&lt;String&gt; sets) &#123;
        this.sets = sets;
    &#125;
    public void setCourses(String[] courses) &#123;
        this.courses = courses;
    &#125;
    public void setList(List&lt;String&gt; list) &#123;
        this.list = list;
    &#125;
    public void setMaps(Map&lt;String, String&gt; maps) &#123;
        this.maps = maps;
    &#125;

&lt;!--（2）在 spring 配置文件进行配置--&gt;
    &lt;bean id=&quot;stu&quot; class=&quot;com.atguigu.spring5.collectiontype.Stu&quot;&gt;
        &lt;!--数组类型属性注入--&gt;
        &lt;property name=&quot;courses&quot;&gt;
            &lt;array&gt;
                &lt;value&gt;java课程&lt;/value&gt;
                &lt;value&gt;数据库课程&lt;/value&gt;
            &lt;/array&gt;
        &lt;/property&gt;
        &lt;!--list类型属性注入--&gt;
        &lt;property name=&quot;list&quot;&gt;
            &lt;list&gt;
                &lt;value&gt;张三&lt;/value&gt;
                &lt;value&gt;小三&lt;/value&gt;
            &lt;/list&gt;
        &lt;/property&gt;
        &lt;!--map类型属性注入--&gt;
        &lt;property name=&quot;maps&quot;&gt;
            &lt;map&gt;
                &lt;entry key=&quot;JAVA&quot; value=&quot;java&quot;&gt;&lt;/entry&gt;
                &lt;entry key=&quot;PHP&quot; value=&quot;php&quot;&gt;&lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;
        &lt;!--set类型属性注入--&gt;
        &lt;property name=&quot;sets&quot;&gt;
            &lt;set&gt;
                &lt;value&gt;MySQL&lt;/value&gt;
                &lt;value&gt;Redis&lt;/value&gt;
            &lt;/set&gt;
        &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<p><strong>8、在集合里面设置对象类型值</strong></p>
<pre><code class="java">  //学生所学多门课程
    private List&lt;Course&gt; courseList;//创建集合
    public void setCourseList(List&lt;Course&gt; courseList) &#123;
        this.courseList = courseList;
    &#125;
12345
    &lt;!--创建多个course对象--&gt;
    &lt;bean id=&quot;course1&quot; class=&quot;com.atguigu.spring5.collectiontype.Course&quot;&gt;
        &lt;property name=&quot;cname&quot; value=&quot;Spring5框架&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;bean id=&quot;course2&quot; class=&quot;com.atguigu.spring5.collectiontype.Course&quot;&gt;
        &lt;property name=&quot;cname&quot; value=&quot;MyBatis框架&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    
       &lt;!--注入list集合类型，值是对象--&gt;
       &lt;property name=&quot;courseList&quot;&gt;
           &lt;list&gt;
               &lt;ref bean=&quot;course1&quot;&gt;&lt;/ref&gt;
               &lt;ref bean=&quot;course2&quot;&gt;&lt;/ref&gt;
           &lt;/list&gt;
       &lt;/property&gt;
</code></pre>
<hr>
<pre><code class="xml">&lt;!--第一步：在 spring 配置文件中引入名称空间 util--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:util=&quot;http://www.springframework.org/schema/util&quot; &lt;!--添加util名称空间--&gt;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;  &lt;!--添加util名称空间--&gt;
    
&lt;!--第二步：使用 util 标签完成 list 集合注入提取--&gt;
&lt;!--把集合注入部分提取出来--&gt;
 &lt;!--1 提取list集合类型属性注入--&gt;
    &lt;util:list id=&quot;bookList&quot;&gt;
        &lt;value&gt;易筋经&lt;/value&gt;
        &lt;value&gt;九阴真经&lt;/value&gt;
        &lt;value&gt;九阳神功&lt;/value&gt;
    &lt;/util:list&gt;

 &lt;!--2 提取list集合类型属性注入使用--&gt;
    &lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.collectiontype.Book&quot; scope=&quot;prototype&quot;&gt;
        &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
</code></pre>
<h3 id="Spring-IOC容器-Bean管理——基于XML（续集）"><a href="#Spring-IOC容器-Bean管理——基于XML（续集）" class="headerlink" title="Spring IOC容器-Bean管理——基于XML（续集）"></a>Spring <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=IOC&spm=1001.2101.3001.7020">IOC</a>容器-Bean管理——基于XML（续集）</h3><h5 id="1、IOC-操作-Bean-管理（FactoryBean）"><a href="#1、IOC-操作-Bean-管理（FactoryBean）" class="headerlink" title="1、IOC 操作 Bean 管理（FactoryBean）"></a><strong>1、IOC 操作 Bean 管理（FactoryBean）</strong></h5><blockquote>
<p> 1、Spring 有两种类型 bean，一种普通 bean，另外一种工厂 bean（FactoryBean）</p>
<p> 2、普通 bean：在配置文件中定义 bean 类型就是返回类型</p>
<p> 3、工厂 bean：在配置文件定义 bean 类型可以和<strong>返回类型不一样</strong> 第一步 创建类，让这个类作为工厂 bean，实现接口 FactoryBean 第二步 实现接口里面的方法，在实现的方法中定义返回的 bean 类型</p>
</blockquote>
<pre><code class="java">public class MyBean implements FactoryBean&lt;Course&gt; &#123;

    //定义返回bean
    @Override
    public Course getObject() throws Exception &#123;
        Course course = new Course();
        course.setCname(&quot;abc&quot;);
        return course;
    &#125;
&#125;
12345678910
&lt;bean id=&quot;myBean&quot; class=&quot;com.atguigu.spring5.factorybean.MyBean&quot;&gt;
&lt;/bean&gt;
12
@Test
public void test3() &#123;
 ApplicationContext context =
 new ClassPathXmlApplicationContext(&quot;bean3.xml&quot;);
 Course course = context.getBean(&quot;myBean&quot;, Course.class);//返回值类型可以不是定义的bean类型！
 System.out.println(course);
&#125;
</code></pre>
<h5 id="2、IOC-操作-Bean-管理（bean-作用域）"><a href="#2、IOC-操作-Bean-管理（bean-作用域）" class="headerlink" title="2、IOC 操作 Bean 管理（bean 作用域）"></a><strong>2、IOC 操作 Bean 管理（bean 作用域）</strong></h5><p>在 Spring 里面，默认情况下，bean 是单实例对象，下面进行作用域设置：</p>
<blockquote>
<p>（1）在 spring 配置文件 bean 标签里面有属性（scope）用于设置单实例还是多实例</p>
<p>（2）scope 属性值 第一个值 默认值，singleton，表示是单实例对象 第二个值 prototype，表示是多实例对象</p>
</blockquote>
<pre><code class="xml">&lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.collectiontype.Book&quot; scope=&quot;prototype&quot;&gt;&lt;!--设置为多实例--&gt;
        &lt;property name=&quot;list&quot; ref=&quot;bookList&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<blockquote>
<p>（3）singleton 和 prototype 区别</p>
<p>a）singleton 单实例，prototype 多实例</p>
<p>b）设置 scope 值是 singleton 时候，<strong>加载 spring 配置文件时候就会创建单实例对象</strong> ；设置 scope 值是 prototype 时候，不是在加载 spring 配置文件时候创建对象，在<strong>调用 getBean 方法时候创建多实例对象</strong></p>
</blockquote>
<h5 id="3、IOC-操作-Bean-管理（bean-生命周期）"><a href="#3、IOC-操作-Bean-管理（bean-生命周期）" class="headerlink" title="3、IOC 操作 Bean 管理（bean 生命周期）"></a><strong>3、IOC 操作 Bean 管理（bean 生命周期）</strong></h5><blockquote>
<p>1、生命周期 ：从对象创建到对象销毁的过程</p>
<p>2、bean 生命周期</p>
<p>（1）通过构造器创建 bean 实例（无参数构造）</p>
<p>（2）为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）</p>
<p>（3）调用 bean 的初始化的方法（需要进行配置初始化的方法）</p>
<p>（4）bean 可以使用了（对象获取到了）</p>
<p>（5）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>
<p>3、演示 bean 生命周期 ：</p>
</blockquote>
<pre><code class="java">        public class Orders &#123;
         //无参数构造
         public Orders() &#123;
         System.out.println(&quot;第一步 执行无参数构造创建 bean 实例&quot;);
         &#125;
         private String oname;
         public void setOname(String oname) &#123;
         this.oname = oname;
         System.out.println(&quot;第二步 调用 set 方法设置属性值&quot;);
         &#125;
         //创建执行的初始化的方法
         public void initMethod() &#123;
         System.out.println(&quot;第三步 执行初始化的方法&quot;);
         &#125;
         //创建执行的销毁的方法
         public void destroyMethod() &#123;
         System.out.println(&quot;第五步 执行销毁的方法&quot;);
         &#125;
        &#125;
</code></pre>
<hr>
<pre><code class="java">public class MyBeanPost implements BeanPostProcessor &#123;//创建后置处理器实现类
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException &#123;
        System.out.println(&quot;在初始化之前执行的方法&quot;);
        return bean;
    &#125;
    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;
        System.out.println(&quot;在初始化之后执行的方法&quot;);
        return bean;
    &#125;
&#125;

&lt;!--配置文件的bean参数配置--&gt;
&lt;bean id=&quot;orders&quot; class=&quot;com.atguigu.spring5.bean.Orders&quot; init-method=&quot;initMethod&quot; destroy-method=&quot;destroyMethod&quot;&gt;    &lt;!--配置初始化方法和销毁方法--&gt;
    &lt;property name=&quot;oname&quot; value=&quot;手机&quot;&gt;&lt;/property&gt;&lt;!--这里就是通过set方式（注入属性）赋值--&gt;
&lt;/bean&gt;

&lt;!--配置后置处理器--&gt;
&lt;bean id=&quot;myBeanPost&quot; class=&quot;com.atguigu.spring5.bean.MyBeanPost&quot;&gt;&lt;/bean&gt;
1234567
 @Test
 public void testBean3() &#123;
// ApplicationContext context =
// new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);
 ClassPathXmlApplicationContext context =
 new ClassPathXmlApplicationContext(&quot;bean4.xml&quot;);
 Orders orders = context.getBean(&quot;orders&quot;, Orders.class);
 System.out.println(&quot;第四步 获取创建 bean 实例对象&quot;);
 System.out.println(orders);
 //手动让 bean 实例销毁
 context.close();
 &#125;
</code></pre>
<blockquote>
<p><strong>4、bean 的后置处理器，bean 生命周期有七步</strong> （正常生命周期为五步，而配置后置处理器后为七步）</p>
<p>（1）通过构造器创建 bean 实例（无参数构造）</p>
<p>（2）为 bean 的属性设置值和对其他 bean 引用（调用 set 方法）</p>
<p>（3）把 bean 实例传递 bean 后置处理器的方法 postProcessBeforeInitialization</p>
<p>（4）调用 bean 的初始化的方法（需要进行配置初始化的方法）</p>
<p>（5）把 bean 实例传递 bean 后置处理器的方法 postProcessAfterInitialization</p>
<p>（6）bean 可以使用了（对象获取到了）</p>
<p>（7）当容器关闭时候，调用 bean 的销毁的方法（需要进行配置销毁的方法）</p>
</blockquote>
<hr>
<h5 id="4、IOC-操作-Bean-管理-外部属性文件"><a href="#4、IOC-操作-Bean-管理-外部属性文件" class="headerlink" title="4、IOC 操作 Bean 管理(外部属性文件)"></a><strong>4、IOC 操作 Bean 管理(外部属性文件)</strong></h5><blockquote>
<p><strong>方式一：直接配置数据库信息</strong> ：（1）配置Druid（德鲁伊）连接池 （2）引入Druid（德鲁伊）连接池依赖 jar 包</p>
</blockquote>
<pre><code class="xml">&lt;!--直接配置连接池--&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/userDb&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
</code></pre>
<blockquote>
<p><strong>方式二：引入外部属性文件配置数据库连接池</strong></p>
<p>（1）创建外部属性文件，properties 格式文件，写数据库信息（<strong>jdbc.properties</strong>）</p>
</blockquote>
<pre><code class="properties">    prop.driverClass=com.mysql.jdbc.Driver
    prop.url=jdbc:mysql://localhost:3306/userDb
    prop.userName=root
    prop.password=root
</code></pre>
<blockquote>
<p>（2）把外部 properties 属性文件引入到 spring 配置文件中 —— 引入 context 名称空间</p>
</blockquote>
<pre><code class="xml">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;&lt;!--引入context名称空间--&gt;
    
        &lt;!--引入外部属性文件--&gt;
    &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;

    &lt;!--配置连接池--&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;prop.driverClass&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;url&quot; value=&quot;$&#123;prop.url&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;username&quot; value=&quot;$&#123;prop.userName&#125;&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;$&#123;prop.password&#125;&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    
&lt;/beans&gt;
</code></pre>
<h3 id="IOC-操作-Bean-管理-基于注解方式"><a href="#IOC-操作-Bean-管理-基于注解方式" class="headerlink" title="IOC 操作 Bean 管理(基于注解方式)"></a>IOC 操作 Bean 管理(基于注解方式)</h3><h5 id="1、什么是注解"><a href="#1、什么是注解" class="headerlink" title="1、什么是注解"></a><strong>1、什么是注解</strong></h5><p>（1）注解是代码特殊标记，格式：@注解名称(属性名称=属性值, 属性名称=属性值…)</p>
<p>（2）使用注解，注解作用在类上面，方法上面，属性上面</p>
<p>（3）使用注解目的：简化 xml 配置</p>
<h5 id="2、Spring-针对-Bean-管理中创建对象提供注解"><a href="#2、Spring-针对-Bean-管理中创建对象提供注解" class="headerlink" title="2、Spring 针对 Bean 管理中创建对象提供注解"></a><strong>2、Spring 针对 Bean 管理中<font color=red>创建对象</font>提供注解</strong></h5><p>下面四个注解功能是一样的，都可以用来创建 bean 实例</p>
<p>（1）@<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Component&spm=1001.2101.3001.7020">Component</a></p>
<p>（2）@Service</p>
<p>（3）@Controller</p>
<p>（4）@Repository</p>
<h5 id="3、基于注解方式实现对象创建"><a href="#3、基于注解方式实现对象创建" class="headerlink" title="3、基于注解方式实现对象创建"></a><strong>3、基于注解方式实现对象创建</strong></h5><p>第一步 引入依赖 （引入<strong>spring-aop jar包</strong>）</p>
<p>第二步 开启组件扫描</p>
<pre><code class="xml">&lt;!--开启组件扫描
 1 如果扫描多个包，多个包使用逗号隔开
 2 扫描包上层目录
--&gt;
&lt;context:component-scan base-package=&quot;com.atguigu&quot;&gt;&lt;/context:component-scan&gt;
</code></pre>
<p>第三步 创建类，在类上面添加创建对象注解</p>
<pre><code class="java">//在注解里面 value 属性值可以省略不写，
//默认值是类名称，首字母小写
//UserService -- userService
@Component(value = &quot;userService&quot;) //注解等同于XML配置文件：&lt;bean id=&quot;userService&quot; class=&quot;..&quot;/&gt;
public class UserService &#123;
 public void add() &#123;
 System.out.println(&quot;service add.......&quot;);
 &#125;
&#125;
</code></pre>
<h5 id="4、开启组件扫描细节配置"><a href="#4、开启组件扫描细节配置" class="headerlink" title="4、开启组件扫描细节配置"></a><strong>4、开启组件扫描细节配置</strong></h5><pre><code class="xml">&lt;!--示例 1
 use-default-filters=&quot;false&quot; 表示现在不使用默认 filter，自己配置 filter
 context:include-filter ，设置扫描哪些内容
--&gt;
&lt;context:component-scan base-package=&quot;com.atguigu&quot; use-defaultfilters=&quot;false&quot;&gt;
 &lt;context:include-filter type=&quot;annotation&quot;

expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;&lt;!--代表只扫描Controller注解的类--&gt;
&lt;/context:component-scan&gt;
&lt;!--示例 2
 下面配置扫描包所有内容
 context:exclude-filter： 设置哪些内容不进行扫描
--&gt;
&lt;context:component-scan base-package=&quot;com.atguigu&quot;&gt;
 &lt;context:exclude-filter type=&quot;annotation&quot;

expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;&lt;!--表示Controller注解的类之外一切都进行扫描--&gt;
&lt;/context:component-scan&gt;
</code></pre>
<h5 id="5、基于注解方式实现属性注入"><a href="#5、基于注解方式实现属性注入" class="headerlink" title="5、基于注解方式实现属性注入"></a><strong>5、基于注解方式实现<font color=red>属性注入</font></strong></h5><h6 id="（1）-Autowired：根据属性类型进行自动装配"><a href="#（1）-Autowired：根据属性类型进行自动装配" class="headerlink" title="（1）@Autowired：根据属性类型进行自动装配"></a>（1）@Autowired：根据属性类型进行自动装配</h6><p>第一步 把 service 和 dao 对象创建，在 service 和 dao 类添加创建对象注解</p>
<p>第二步 在 service 注入 dao 对象，在 service 类添加 dao 类型属性，在属性上面使用注解</p>
<pre><code class="java">@Service
public class UserService &#123;
 //定义 dao 类型属性
 //不需要添加 set 方法
 //添加注入属性注解
 @Autowired
 private UserDao userDao;
 public void add() &#123;
 System.out.println(&quot;service add.......&quot;);
 userDao.add();
 &#125;
&#125;

//Dao实现类
@Repository
//@Repository(value = &quot;userDaoImpl1&quot;)
public class UserDaoImpl implements UserDao &#123;
    @Override
    public void add() &#123;
        System.out.println(&quot;dao add.....&quot;);
    &#125;
&#125;
</code></pre>
<h6 id="（2）-Qualifier：根据名称进行注入，这个-Qualifier-注解的使用，和上面-Autowired-一起使用"><a href="#（2）-Qualifier：根据名称进行注入，这个-Qualifier-注解的使用，和上面-Autowired-一起使用" class="headerlink" title="（2）@Qualifier：根据名称进行注入，这个@Qualifier 注解的使用，和上面@Autowired 一起使用"></a>（2）@Qualifier：根据名称进行注入，这个@Qualifier 注解的使用，和上面@Autowired 一起使用</h6><pre><code class="java">//定义 dao 类型属性
//不需要添加 set 方法
//添加注入属性注解
@Autowired //根据类型进行注入
//根据名称进行注入（目的在于区别同一接口下有多个实现类，根据类型就无法选择，从而出错！）
@Qualifier(value = &quot;userDaoImpl1&quot;) 
private UserDao userDao;
</code></pre>
<h6 id="（3）-Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）"><a href="#（3）-Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）" class="headerlink" title="（3）@Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）"></a>（3）@Resource：可以根据类型注入，也可以根据名称注入（它属于javax包下的注解，不推荐使用！）</h6><pre><code class="java">//@Resource //根据类型进行注入
@Resource(name = &quot;userDaoImpl1&quot;) //根据名称进行注入
private UserDao userDao;
</code></pre>
<h6 id="（4）-Value：注入普通类型属性"><a href="#（4）-Value：注入普通类型属性" class="headerlink" title="（4）@Value：注入普通类型属性"></a>（4）@Value：注入普通类型属性</h6><pre><code class="java">@Value(value = &quot;abc&quot;)
private String name
</code></pre>
<h5 id="6、完全注解开发"><a href="#6、完全注解开发" class="headerlink" title="6、完全注解开发"></a><strong>6、完全注解开发</strong></h5><p>（1）创建配置类，替代 xml 配置文件</p>
<pre><code class="java">@Configuration //作为配置类，替代 xml 配置文件
@ComponentScan(basePackages = &#123;&quot;com.atguigu&quot;&#125;)
public class SpringConfig &#123;
    
&#125;
</code></pre>
<p>（2）编写测试类</p>
<pre><code class="java">@Test
public void testService2() &#123;
 //加载配置类
 ApplicationContext context
 = new AnnotationConfigApplicationContext(SpringConfig.class);
 UserService userService = context.getBean(&quot;userService&quot;,
UserService.class);
 System.out.println(userService);
 userService.add();
&#125;
</code></pre>
<blockquote>
<p>註解開發：</p>
<ul>
<li><p>創建對象 –&gt;用在類上</p>
<ul>
<li><p>@Component</p>
</li>
<li><p>@Service</p>
</li>
<li><p>@Controller</p>
</li>
<li><p>@Repository</p>
<blockquote>
<p>針對xml配置自動裝配</p>
<ul>
<li><p>@Configuration –&gt; 用在<code>類</code>上，宣告這個類為配置類</p>
</li>
<li><p>@ComponentScan –&gt; 開啟註解掃描功能。</p>
<blockquote>
<p>ex：@ComponentScan(basePackages = {“com.shung”}) –&gt;開啟註解掃描功能，並定義掃描的位置</p>
</blockquote>
</li>
<li><p>@Bean –&gt; 配置類的方法前掛上<code>@Bean</code>則方法回傳的物件就會被註冊為Spring容器管理的bean</p>
<blockquote>
<p>@Bean也會對其配置的方法其形參進行自動裝配 (@Autowired)</p>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>屬性注入</p>
<ul>
<li><p>針對對象類型的成員變量</p>
<ul>
<li><p>@Autowired –&gt;典型的用法就是掛在<code>對象類型的成員變量</code>上，會根據類型進行屬性注入。</p>
<p>(ex：根據對象類型userDao，找到該類或其實現類userDaoImpl，使用實現類進行變量屬性注入)</p>
<blockquote>
<p>java中子類可以轉換成父類的類型，父類不可以轉換成子類的類型。因此在spring中子類是可以注入父類中的。<br>注意的是spring容器中只能配置一個子類，多了的話就不能使用自動裝配了，spring就迷茫了，不知道把哪個實現類交給父類，拋出異常</p>
</blockquote>
</li>
<li><p>@Qualifier –&gt; 配合@Autowired使用，根據名稱進行屬性注入</p>
<p>(ex：上述@Autowired會根據對象類型注入，但若該接口有多個實現類，無法判斷要用哪個實現類進行屬性注入，使用@Qualifire可定義要使用哪個名稱的實現類進行屬性注入)</p>
</li>
<li><p>@Resource –&gt;可完成上述兩個功能，但此為javax包下的方法，不建議使用</p>
</li>
<li><p>@Required –&gt; 应用于 bean 属性的 setter 方法，它表明受影响的 bean 属性在配置时必须放在 XML 配置文件中，否则容器就会抛出一个 BeanInitializationException 异常。</p>
</li>
</ul>
</li>
<li><p>針對普通類型的成員變量</p>
<ul>
<li>@Value</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring - AOP"></a>Spring - <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=AOP&spm=1001.2101.3001.7020">AOP</a></h2><h3 id="1、AOP-基本概念"><a href="#1、AOP-基本概念" class="headerlink" title="1、AOP 基本概念"></a><strong>1、AOP 基本概念</strong></h3><p>（1）面向切面编程（方面），利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得 业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<p>（2）通俗描述：不通过修改源代码方式，在主干功能里面添加新功能</p>
<p>（3）使用登录例子说明 AOP</p>
<p><img src="/2023/02/23/03_Spring%E7%AD%86%E8%A8%98/image-20230328113713792.png" alt="image"></p>
<h3 id="2、AOP（底层原理）"><a href="#2、AOP（底层原理）" class="headerlink" title="2、AOP（底层原理）"></a><strong>2、AOP（底层原理）</strong></h3><p>a）AOP 底层使用动态代理 ，动态代理有两种情况：</p>
<blockquote>
<p>第一种 有接口情况，使用 JDK 动态代理 ；创建<strong>接口实现类代理对象</strong>，增强类的方法<br><img src="/2023/02/23/03_Spring%E7%AD%86%E8%A8%98/image-20230328113720553.png" alt="image"></p>
</blockquote>
<blockquote>
<p>第二种 没有接口情况，使用 CGLIB 动态代理；创建<strong>子类的代理对象</strong>，增强类的方法<br><img src="/2023/02/23/03_Spring%E7%AD%86%E8%A8%98/image-20230328113729066.png" alt="image"></p>
</blockquote>
<h3 id="3、AOP（JDK-动态代理）"><a href="#3、AOP（JDK-动态代理）" class="headerlink" title="3、AOP（JDK 动态代理）"></a><strong>3、AOP（JDK 动态代理）</strong></h3><p>1）使用 JDK 动态代理，使用 Proxy 类里面的方法创建代理对象</p>
<blockquote>
<p>调用 newProxyInstance 方法，方法有三个参数：</p>
<pre><code class="java">public static Object newProxyInstance(ClassLoader loader,
                                   Class&lt;?&gt;[] interfaces,
                                   InvocationHandler h)
123
</code></pre>
<p>第一参数，类加载器</p>
<p>第二参数，增强方法所在的类，这个类实现的接口，<em>支持多个接口</em></p>
<p>第三参数，实现这个接口 InvocationHandler，创建代理对象，写增强的部分</p>
</blockquote>
<p>2）编写 JDK 动态代理代码</p>
<pre><code class="java">//（1）创建接口，定义方法
public interface UserDao &#123;
 public int add(int a,int b);
 public String update(String id);
&#125;
12345
//（2）创建接口实现类，实现方法
public class UserDaoImpl implements UserDao &#123;
 @Override
 public int add(int a, int b) &#123;
 return a+b;
 &#125;
 @Override
 public String update(String id) &#123;
 return id;
 &#125;
&#125;
1234567891011
//（3）使用 Proxy 类创建接口代理对象
public class JDKProxy &#123;
 public static void main(String[] args) &#123;
 //创建接口实现类代理对象
 Class[] interfaces = &#123;UserDao.class&#125;;
 UserDaoImpl userDao = new UserDaoImpl(); 
/** 第一参数，类加载器 
    第二参数，增强方法所在的类，这个类实现的接口，(支持多个接口)
    第三参数，实现这个接口 InvocationHandler，创建代理对象，写增强的部分  */
 UserDao dao =(UserDao)Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces,
                    new UserDaoProxy(userDao));
 int result = dao.add(1, 2);
 System.out.println(&quot;result:&quot;+result);
 &#125;
&#125;

//创建代理对象代码
class UserDaoProxy implements InvocationHandler &#123;
 //1 把创建的是谁的代理对象，把谁传递过来
 //有参数构造传递
 private Object obj;
 public UserDaoProxy(Object obj) &#123;
 this.obj = obj;
 &#125;
 //增强的逻辑
 @Override
 public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
 //方法之前
 System.out.println(&quot;方法之前执行....&quot;+method.getName()+&quot; :传递的参数...&quot;+ Arrays.toString(args));
 //被增强的方法执行
 Object res = method.invoke(obj, args);
 //方法之后
 System.out.println(&quot;方法之后执行....&quot;+obj);
 return res;
 &#125;
&#125;
123456789101112131415161718192021222324252627282930313233343536
</code></pre>
<h3 id="4、AOP（术语）"><a href="#4、AOP（术语）" class="headerlink" title="4、AOP（术语）"></a><strong>4、AOP（术语）</strong></h3><p>a）连接点：类里面哪些方法可以被增强，这些方法称为连接点</p>
<p>b）切入点：实际被真正增强的方法称为切入点</p>
<p>c）通知（增强）：实际增强的逻辑部分称为通知，且分为以下五种类型：</p>
<p>1）前置通知 2）后置通知 3）环绕通知 4）异常通知 5）最终通知</p>
<p>d）切面：把通知应用到切入点过程</p>
<h3 id="5、AOP操作"><a href="#5、AOP操作" class="headerlink" title="5、AOP操作"></a><strong>5、AOP操作</strong></h3><p>a）Spring 框架一般都是基于 AspectJ 实现 AOP 操作，AspectJ 不是 Spring 组成部分，独立 AOP 框架，一般把 AspectJ 和 Spirng 框架一起使 用，进行 AOP 操作</p>
<p>b）基于 AspectJ 实现 AOP 操作：1）基于 xml 配置文件实现 （2）基于注解方式实现（使用）</p>
<p>c）引入相关jar包</p>
<p>d）切入点表达式，如下：</p>
<pre><code class="java">（1）切入点表达式作用：知道对哪个类里面的哪个方法进行增强 
（2）语法结构： execution([权限修饰符] [返回类型] [类全路径] [方法名称]([参数列表]) )
（3）例子如下：
    例 1：对 com.atguigu.dao.BookDao 类里面的 add 进行增强
        execution(* com.atguigu.dao.BookDao.add(..))
     例 2：对 com.atguigu.dao.BookDao 类里面的所有的方法进行增强
        execution(* com.atguigu.dao.BookDao.* (..))
    例 3：对 com.atguigu.dao 包里面所有类，类里面所有方法进行增强
        execution(* com.atguigu.dao.*.* (..))
123456789
</code></pre>
<h3 id="6、AOP-操作（AspectJ-注解）"><a href="#6、AOP-操作（AspectJ-注解）" class="headerlink" title="6、AOP 操作（AspectJ 注解）"></a><strong>6、AOP 操作（AspectJ 注解）</strong></h3><pre><code class="java">//1、创建类，在类里面定义方法
public class User &#123;
 public void add() &#123;
 System.out.println(&quot;add.......&quot;);
 &#125;
&#125;
//2、创建增强类（编写增强逻辑）
//（1）在增强类里面，创建方法，让不同方法代表不同通知类型
//增强的类
public class UserProxy &#123;
 public void before() &#123;//前置通知
 System.out.println(&quot;before......&quot;);
 &#125;
&#125;

123456789101112131415
&lt;!--3、进行通知的配置--&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
    &lt;!-- 开启注解扫描 --&gt;
    &lt;context:component-scan base-package=&quot;com.atguigu.spring5.aopanno&quot;&gt;&lt;/context:component-scan&gt;

    &lt;!-- 开启Aspect生成代理对象--&gt;
    &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
&lt;/beans&gt;
123456789101112131415
//增强的类
@Component
@Aspect  //生成代理对象
public class UserProxy &#123;&#125;

//被增强的类
@Component
public class User &#123;&#125;
12345678
</code></pre>
<hr>
<pre><code class="java">//4、配置不同类型的通知
@Component
@Aspect  //生成代理对象
public class UserProxy &#123;
      //相同切入点抽取
    @Pointcut(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)
    public void pointdemo() &#123;

    &#125;

    //前置通知
    //@Before注解表示作为前置通知
    @Before(value = &quot;pointdemo()&quot;)//相同切入点抽取使用！
    public void before() &#123;
        System.out.println(&quot;before.........&quot;);
    &#125;

    //后置通知（返回通知）
    @AfterReturning(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)
    public void afterReturning() &#123;
        System.out.println(&quot;afterReturning.........&quot;);
    &#125;

    //最终通知
    @After(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)
    public void after() &#123;
        System.out.println(&quot;after.........&quot;);
    &#125;

    //异常通知
    @AfterThrowing(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)
    public void afterThrowing() &#123;
        System.out.println(&quot;afterThrowing.........&quot;);
    &#125;

    //环绕通知
    @Around(value = &quot;execution(* com.atguigu.spring5.aopanno.User.add(..))&quot;)
    public void around(ProceedingJoinPoint proceedingJoinPoint) throws Throwable &#123;
        System.out.println(&quot;环绕之前.........&quot;);

        //被增强的方法执行
        proceedingJoinPoint.proceed();

        System.out.println(&quot;环绕之后.........&quot;);
    &#125;
&#125;

1234567891011121314151617181920212223242526272829303132333435363738394041424344454647
</code></pre>
<h3 id="7、有多个增强类对同一个方法进行增强，设置增强类优先级"><a href="#7、有多个增强类对同一个方法进行增强，设置增强类优先级" class="headerlink" title="7、有多个增强类对同一个方法进行增强，设置增强类优先级"></a><strong>7、有多个增强类对同一个方法进行增强，设置增强类优先级</strong></h3><pre><code class="java">//（1）在增强类上面添加注解 @Order(数字类型值)，数字类型值越小优先级越高
@Component
@Aspect
@Order(1)
public class PersonProxy&#123; &#125;

123456
</code></pre>
<h3 id="8、AOP-操作（AspectJ-配置文件）"><a href="#8、AOP-操作（AspectJ-配置文件）" class="headerlink" title="8、AOP 操作（AspectJ 配置文件）"></a><strong>8、AOP 操作（AspectJ 配置文件）</strong></h3><pre><code class="xml">&lt;!--1、创建两个类，增强类和被增强类，创建方法（同上一样）--&gt;
&lt;!--2、在 spring 配置文件中创建两个类对象--&gt;
&lt;!--创建对象--&gt;
&lt;bean id=&quot;book&quot; class=&quot;com.atguigu.spring5.aopxml.Book&quot;&gt;&lt;/bean&gt;
&lt;bean id=&quot;bookProxy&quot; class=&quot;com.atguigu.spring5.aopxml.BookProxy&quot;&gt;&lt;/bean&gt;
&lt;!--3、在 spring 配置文件中配置切入点--&gt;
&lt;!--配置 aop 增强--&gt;
&lt;aop:config&gt;
 &lt;!--切入点--&gt;
 &lt;aop:pointcut id=&quot;p&quot; expression=&quot;execution(* com.atguigu.spring5.aopxml.Book.buy(..))&quot;/&gt;
 &lt;!--配置切面--&gt;
 &lt;aop:aspect ref=&quot;bookProxy&quot;&gt;
 &lt;!--增强作用在具体的方法上--&gt;
 &lt;aop:before method=&quot;before&quot; pointcut-ref=&quot;p&quot;/&gt;
 &lt;/aop:aspect&gt;
&lt;/aop:config&gt;

1234567891011121314151617
</code></pre>
<h2 id="Srping-JdbcTemplate"><a href="#Srping-JdbcTemplate" class="headerlink" title="Srping - JdbcTemplate"></a>Srping - JdbcTemplate</h2><h3 id="1、JdbcTemplate概念及使用"><a href="#1、JdbcTemplate概念及使用" class="headerlink" title="1、JdbcTemplate概念及使用"></a>1、JdbcTemplate概念及使用</h3><p>a）Spring 框架对 JDBC 进行封装，使用 JdbcTemplate 方便实现对数据库操作</p>
<p>b）引入相关 jar 包</p>
<p>c）在 spring 配置文件配置<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0&spm=1001.2101.3001.7020">数据库连接池</a></p>
<pre><code class="xml">&lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;
 destroy-method=&quot;close&quot;&gt;
 &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///test&quot; /&gt;
 &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
 &lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;
 &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
&lt;/bean&gt;
1234567
</code></pre>
<p>d）配置 JdbcTemplate 对象，注入 DataSource</p>
<pre><code class="xml">&lt;!-- JdbcTemplate 对象 --&gt;
&lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;
 &lt;!--注入 dataSource--&gt;
 &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;&lt;!--set方式注入--&gt;
&lt;/bean&gt;
12345
</code></pre>
<p>e）创建 service 类，创建 dao 类，在 dao 注入 jdbcTemplate 对象</p>
<pre><code class="xml">&lt;!-- 组件扫描 --&gt;
&lt;context:component-scan base-package=&quot;com.atguigu&quot;&gt;&lt;/context:component-scan&gt;
12
@Service
public class BookService &#123;
 //注入 dao
 @Autowired
 private BookDao bookDao;
&#125;

@Repository
public class BookDaoImpl implements BookDao &#123;
 //注入 JdbcTemplate
 @Autowired
 private JdbcTemplate jdbcTemplate;
&#125;
12345678910111213
</code></pre>
<h3 id="2、JdbcTemplate-操作数据库（添加）"><a href="#2、JdbcTemplate-操作数据库（添加）" class="headerlink" title="2、JdbcTemplate 操作数据库（添加）"></a>2、JdbcTemplate 操作数据库（添加）</h3><p>a）对应数据库创建实体类</p>
<p>b）创建service和dao</p>
<p>（1）在 dao 进行数据库添加操作</p>
<p>（2）调用 JdbcTemplate 对象里面 update 方法实现添加操作</p>
<pre><code class="java">@Repository
public class BookDaoImpl implements BookDao &#123;
 //注入 JdbcTemplate
 @Autowired
 private JdbcTemplate jdbcTemplate;
 //添加的方法
 @Override
 public void add(Book book) &#123;
 //1 创建 sql 语句
 String sql = &quot;insert into t_book values(?,?,?)&quot;;
 //2 调用方法实现
 Object[] args = &#123;book.getUserId(), book.getUsername(),book.getUstatus()&#125;;
 int update = jdbcTemplate.update(sql,args);
 System.out.println(update);
 &#125;
&#125;
12345678910111213141516
</code></pre>
<h3 id="3、JdbcTemplate-操作数据库（修改和删除）"><a href="#3、JdbcTemplate-操作数据库（修改和删除）" class="headerlink" title="3、JdbcTemplate 操作数据库（修改和删除）"></a>3、JdbcTemplate 操作数据库（修改和删除）</h3><pre><code class="java">//1、修改
@Override
public void updateBook(Book book) &#123;
 String sql = &quot;update t_book set username=?,ustatus=? where user_id=?&quot;;
 Object[] args = &#123;book.getUsername(), book.getUstatus(),book.getUserId()&#125;;
 int update = jdbcTemplate.update(sql, args);
 System.out.println(update);
&#125;
//2、删除
@Override
public void delete(String id) &#123;
 String sql = &quot;delete from t_book where user_id=?&quot;;
 int update = jdbcTemplate.update(sql, id);
 System.out.println(update);
&#125;
//使用JdbcTemplate 模板所实现的 “增删改” 都是调用了同一个 “update” 方法
12345678910111213141516
</code></pre>
<h3 id="4、JdbcTemplate-操作数据库（查询返回某个值）"><a href="#4、JdbcTemplate-操作数据库（查询返回某个值）" class="headerlink" title="4、JdbcTemplate 操作数据库（查询返回某个值）"></a>4、JdbcTemplate 操作数据库（查询返回某个值）</h3><pre><code class="java">//查询表记录数
@Override
public int selectCount() &#123;
 String sql = &quot;select count(*) from t_book&quot;;
//queryForObject方法中：第一个参数代表--sql语句；第二个参数代表--返回类型class  
 Integer count = jdbcTemplate.queryForObject(sql, Integer.class);
 return count;
&#125;
JdbcTemplate 操作数据库（
123456789
</code></pre>
<h3 id="5、JdbcTemplate-操作数据库（查询返回对象）"><a href="#5、JdbcTemplate-操作数据库（查询返回对象）" class="headerlink" title="5、JdbcTemplate 操作数据库（查询返回对象）"></a>5、JdbcTemplate 操作数据库（查询返回对象）</h3><pre><code class="java">//查询返回对象
@Override
public Book findBookInfo(String id) &#123;
 String sql = &quot;select * from t_book where user_id=?&quot;;
 //调用方法
/*
    queryForObject方法中：
        第一个参数：sql语句
        第二个参数：RowMapper 是接口，针对返回不同类型数据，使用这个接口里面 实现类 完成数据封装
        第三个参数：sql 语句值
*/
 Book book = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class), id);
 return book;
&#125;
1234567891011121314
</code></pre>
<h3 id="6、JdbcTemplate-操作数据库（查询返回集合）"><a href="#6、JdbcTemplate-操作数据库（查询返回集合）" class="headerlink" title="6、JdbcTemplate 操作数据库（查询返回集合）"></a>6、JdbcTemplate 操作数据库（查询返回集合）</h3><pre><code class="java">//所用场景：查询图书列表分页、、
//查询返回集合
@Override
public List&lt;Book&gt; findAllBook() &#123;
 String sql = &quot;select * from t_book&quot;;
 //调用方法
 List&lt;Book&gt; bookList = jdbcTemplate.query(sql, new BeanPropertyRowMapper&lt;Book&gt;(Book.class));
 return bookList;
&#125;
123456789
</code></pre>
<h3 id="7、JdbcTemplate-操作数据库（批量操作）"><a href="#7、JdbcTemplate-操作数据库（批量操作）" class="headerlink" title="7、JdbcTemplate 操作数据库（批量操作）"></a>7、JdbcTemplate 操作数据库（批量操作）</h3><pre><code class="java">//批量添加
@Override
public void batchAddBook(List&lt;Object[]&gt; batchArgs) &#123;
 String sql = &quot;insert into t_book values(?,?,?)&quot;;
//batchUpdate方法 第一个参数：sql语句        第二个参数：List集合，添加多条记录数据
 int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);
 System.out.println(Arrays.toString(ints));
&#125;

//批量添加测试
List&lt;Object[]&gt; batchArgs = new ArrayList&lt;&gt;();
Object[] o1 = &#123;&quot;3&quot;,&quot;java&quot;,&quot;a&quot;&#125;;
Object[] o2 = &#123;&quot;4&quot;,&quot;c++&quot;,&quot;b&quot;&#125;;
Object[] o3 = &#123;&quot;5&quot;,&quot;MySQL&quot;,&quot;c&quot;&#125;;
batchArgs.add(o1);
batchArgs.add(o2);
batchArgs.add(o3);
//调用批量添加
bookService.batchAdd(batchArgs);
12345678910111213141516171819
</code></pre>
<h3 id="8、JdbcTemplate-实现批量修改操作"><a href="#8、JdbcTemplate-实现批量修改操作" class="headerlink" title="8、JdbcTemplate 实现批量修改操作"></a>8、JdbcTemplate 实现批量修改操作</h3><pre><code class="java">//批量修改(同批量添加一样，调用同一个方法)
@Override
public void batchUpdateBook(List&lt;Object[]&gt; batchArgs) &#123;
 String sql = &quot;update t_book set username=?,ustatus=? where user_id=?&quot;;
 int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);
 System.out.println(Arrays.toString(ints));
&#125;
1234567
</code></pre>
<h2 id="Spring——事务操作"><a href="#Spring——事务操作" class="headerlink" title="Spring——事务操作"></a>Spring——事务操作</h2><h3 id="1、事务概念"><a href="#1、事务概念" class="headerlink" title="1、事务概念"></a>1、事务概念</h3><p><strong>a）什么是事务</strong></p>
<p>（1）事务是数据库操作最基本单元，逻辑上一组操作，要么都成功，如果有一个失败所有操 作都失败</p>
<p>（2）典型场景：银行转账 张三 转账 100 元 给 李四； 张三少 100，李四多 100</p>
<p><strong>b）事务四个特性（ACID</strong>） （1）<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%8E%9F%E5%AD%90%E6%80%A7&spm=1001.2101.3001.7020">原子性</a> （2）一致性 （3）隔离性 （4）持久性 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45496190/article/details/106368157">可查看这篇文章描述</a></p>
<h3 id="2、事务操作（模拟事务操作环境）"><a href="#2、事务操作（模拟事务操作环境）" class="headerlink" title="2、事务操作（模拟事务操作环境）"></a>2、事务操作（模拟事务操作环境）</h3><p>a）创建 service，搭建 dao，完成对象创建和注入关系</p>
<pre><code class="java">//（1）service 注入 dao，在 dao 注入 JdbcTemplate，在 JdbcTemplate 注入 DataSource
@Service
public class UserService &#123;
 //注入 dao
 @Autowired
 private UserDao userDao;
&#125;


@Repository
public class UserDaoImpl implements UserDao &#123;
 @Autowired
 private JdbcTemplate jdbcTemplate;
&#125;
</code></pre>
<p>b）在 dao 创建两个方法：多钱和少钱的方法， 在 service 创建方法（转账的方法）</p>
<pre><code class="java">@Repository
public class UserDaoImpl implements UserDao &#123;
 @Autowired
 private JdbcTemplate jdbcTemplate;
 //lucy 转账 100 给 mary
 //少钱
 @Override
 public void reduceMoney() &#123;
 String sql = &quot;update t_account set money=money-? where username=?&quot;;
 jdbcTemplate.update(sql,100,&quot;lucy&quot;);
 &#125;
 //多钱
 @Override
 public void addMoney() &#123;
 String sql = &quot;update t_account set money=money+? where username=?&quot;;
 jdbcTemplate.update(sql,100,&quot;mary&quot;);
 &#125;
&#125;


@Service
public class UserService &#123;
 //注入 dao
 @Autowired
 private UserDao userDao;
 //转账的方法
 public void accountMoney() &#123;
 //lucy 少 100
 userDao.reduceMoney();
 //mary 多 100
 userDao.addMoney();
 &#125;
&#125;

/**
    上边代码正常执行没有问题，
    但是如果代码执行过程中出现异常，有问题，如下模拟异常！
*/
@Service
public class UserService &#123;
    //这里执行后将会产生错误（异常），lucy 少 100后，mary不会多 100，这就不对了！！
    private UserDao userDao;
    //转账方法
    public void accountMoney()&#123;
        userDao.reduceMoney();//lucy 少 100
        int x=10/0;
        userDao.addMoney(); //mary 多 100
    &#125;
&#125;

//解决上边的异常方法——【编程式事务（传统方法）】
//转账的方法
    public void accountMoney() &#123;
        try &#123;
            //第一步 开启事务

            //第二步 进行业务操作
            //lucy少100
            userDao.reduceMoney();

            //模拟异常
            int i = 10/0;

            //mary多100
            userDao.addMoney();

            //第三步 没有发生异常，提交事务
        &#125;catch(Exception e) &#123;
            //第四步 出现异常，事务回滚
        &#125;
    &#125;
</code></pre>
<h3 id="3、事务操作（Spring-事务管理介绍）"><a href="#3、事务操作（Spring-事务管理介绍）" class="headerlink" title="3、事务操作（Spring 事务管理介绍）"></a>3、事务操作（Spring 事务管理介绍）</h3><blockquote>
<p>1、事务添加到 JavaEE 三层结构里面 Service 层（业务逻辑层）</p>
<p>2、在 Spring 进行事务管理操作 ；两种方式：编程式事务管理、<strong>声明式事务管理</strong>（推荐使用）</p>
<p>3、声明式事务管理 （1）<strong>基于注解方式</strong>（推荐使用） （2）基于 xml 配置文件方式</p>
<p>4、在 Spring 进行声明式事务管理，底层使用 AOP 原理</p>
<p>5、Spring 事务管理 API ：提供一个接口，代表事务管理器，这个接口针对不同的框架提供不同的实现类</p>
</blockquote>
<h3 id="4、注解声明式事务管理"><a href="#4、注解声明式事务管理" class="headerlink" title="4、注解声明式事务管理"></a>4、注解声明式事务管理</h3><pre><code class="xml">&lt;!--1、在 spring 配置文件配置事务管理器--&gt;
&lt;!--创建事务管理器--&gt;
&lt;bean id=&quot;transactionManager&quot;
class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
 &lt;!--注入数据源--&gt;
 &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
 &lt;!--2、在 spring 配置文件，开启事务注解,引入名称空间！--&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
 xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
 xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
 xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
 xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
 http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
 http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd 
 http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;

&lt;!--开启事务注解--&gt;
&lt;tx:annotation-driven transactionmanager=&quot;transactionManager&quot;&gt;&lt;/tx:annotation-driven&gt;
 &lt;!--3、在 service 类上面（或者 service 类里面方法上面）添加事务注解--&gt;
 &lt;!--
    （1）@Transactional，这个注解添加到类上面，也可以添加方法上面
    （2）如果把这个注解添加类上面，这个类里面所有的方法都添加事务
    （3）如果把这个注解添加方法上面，为这个方法添加事务——@Transactional
    --&gt;
</code></pre>
<h3 id="5、事务操作（声明式事务管理参数配置）"><a href="#5、事务操作（声明式事务管理参数配置）" class="headerlink" title="5、事务操作（声明式事务管理参数配置）"></a>5、事务操作（声明式事务管理参数配置）</h3><h5 id="Transactional（事务传播行为）"><a href="#Transactional（事务传播行为）" class="headerlink" title="Transactional（事务传播行为）"></a>Transactional（事务传播行为）</h5><p>a）在 service 类上面添加注解@Transactional，在这个注解里面可以配置事务相关参数</p>
<p>b）propagation（事务传播行为）：多事务方法直接进行调用，这个过程中事务 是如何进行管理的</p>
<p>c）spring框架事务传播行为有七种：下面只介绍常用的两种传播行为</p>
<blockquote>
<pre><code class="java">@Transactional(propagation = Propagation.REQUIRED,)            //事务一
public void add()&#123;
 //调用update方法
 update();
&#125;


public void update()&#123;     //事务二

&#125;
12345678910
</code></pre>
</blockquote>
<p>（1）<strong>REQUIRED</strong>：如果add方法本身有事务，调用update方法后，update使用当前add方法里面的事务；</p>
<p>如果add方法本身没有事务，调用update方法后，创建新的事务</p>
<p>（2）<strong>REQUIRED_NEW</strong>：使用add调用update方法，不论add方法是否有事务，都会创建新的事务。</p>
<p><img src="/2023/02/23/03_Spring%E7%AD%86%E8%A8%98/image-20230328113750428.png" alt="image"></p>
<h5 id="ioslation（事务隔离级别）"><a href="#ioslation（事务隔离级别）" class="headerlink" title="ioslation（事务隔离级别）"></a>ioslation（事务隔离级别）</h5><p>a）事务有特性成为隔离性，多事务操作之间不会产生影响。不考虑隔离性产生很多问题</p>
<p>b）有三个读问题：脏读、不可重复读、虚（幻）读 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24732379/article/details/99705815">可查看这里介绍</a></p>
<blockquote>
<p><strong>脏读：</strong> 一个未提交事务读取到另一个未提交事务的数据</p>
<p><strong>不可重复读：</strong> 一个未提交事务读取到另一提交事务修改数据</p>
<p><strong>虚读：</strong> 一个未提交事务读取到另一提交事务添加数据</p>
</blockquote>
<p>c））解决：通过设置事务隔离级别，解决读问题</p>
<pre><code class="java">@Transactional(propagation = Propagation.REQUIRED,isolation = Isolation.REPEATABLE_READ)
1
</code></pre>
<h5 id="timeout：超时时间"><a href="#timeout：超时时间" class="headerlink" title="timeout：超时时间"></a>timeout：超时时间</h5><p>（1）事务需要在一定时间内进行提交，如果不提交进行回滚 （2）默认值是 -1（不超时） ，设置时间以秒单位进行计算</p>
<h5 id="readOnly：是否只读"><a href="#readOnly：是否只读" class="headerlink" title="readOnly：是否只读"></a>readOnly：是否只读</h5><p>（1）读：查询操作，写：添加修改删除操作</p>
<p>（2）readOnly 默认值 false，表示可以查询，可以添加修改删除操作</p>
<p>（3）设置 readOnly 值是 true，设置成 true 之后，只能查询</p>
<h5 id="rollbackFor：回滚"><a href="#rollbackFor：回滚" class="headerlink" title="rollbackFor：回滚"></a>rollbackFor：回滚</h5><p>设置出现哪些异常进行事务回滚</p>
<h5 id="noRollbackFor：不回滚"><a href="#noRollbackFor：不回滚" class="headerlink" title="noRollbackFor：不回滚"></a>noRollbackFor：不回滚</h5><p>设置出现哪些异常不进行事务回滚</p>
<h3 id="6、事务操作（XML-声明式事务管理）"><a href="#6、事务操作（XML-声明式事务管理）" class="headerlink" title="6、事务操作（XML 声明式事务管理）"></a>6、事务操作（XML 声明式事务管理）</h3><p>a）、在 spring 配置文件中进行配置 ：第一步 配置事务管理器 第二步 配置通知 第三步 配置切入点和切面</p>
<pre><code class="xml">&lt;!--1 创建事务管理器--&gt;
&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
 &lt;!--注入数据源--&gt;
 &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;!--2 配置通知--&gt;
&lt;tx:advice id=&quot;txadvice&quot;&gt;
 &lt;!--配置事务参数--&gt;
 &lt;tx:attributes&gt;
 &lt;!--指定哪种规则的方法上面添加事务--&gt;
 &lt;tx:method name=&quot;accountMoney&quot; propagation=&quot;REQUIRED&quot;/&gt;
 &lt;!--&lt;tx:method name=&quot;account*&quot;/&gt;--&gt;
 &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;
&lt;!--3 配置切入点和切面--&gt;
&lt;aop:config&gt;
 &lt;!--配置切入点--&gt;
 &lt;aop:pointcut id=&quot;pt&quot; expression=&quot;execution(*
com.atguigu.spring5.service.UserService.*(..))&quot;/&gt;
 &lt;!--配置切面--&gt;
 &lt;aop:advisor advice-ref=&quot;txadvice&quot; pointcut-ref=&quot;pt&quot;/&gt;
&lt;/aop:config&gt;
12345678910111213141516171819202122
</code></pre>
<h3 id="7、事务操作（完全注解声明式事务管理）"><a href="#7、事务操作（完全注解声明式事务管理）" class="headerlink" title="7、事务操作（完全注解声明式事务管理）"></a>7、事务操作（完全注解声明式事务管理）</h3><pre><code class="java">//1、创建配置类，使用配置类替代 xml 配置文件
@Configuration //配置类
@ComponentScan(basePackages = &quot;com.atguigu&quot;) //组件扫描
@EnableTransactionManagement //开启事务
public class TxConfig &#123;
 //创建数据库连接池
 @Bean
 public DruidDataSource getDruidDataSource() &#123;
 DruidDataSource dataSource = new DruidDataSource();
 dataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);
 dataSource.setUrl(&quot;jdbc:mysql:///test&quot;);
 dataSource.setUsername(&quot;root&quot;);
 dataSource.setPassword(&quot;root&quot;);
 return dataSource;
 &#125;
 //创建 JdbcTemplate 对象
 @Bean
 public JdbcTemplate getJdbcTemplate(DataSource dataSource) &#123;//从IOC容器中拿到配置注入的数据源
 //到 ioc 容器中根据类型找到 dataSource
 JdbcTemplate jdbcTemplate = new JdbcTemplate();
 //注入 dataSource
 jdbcTemplate.setDataSource(dataSource);
 return jdbcTemplate;
 &#125;
 //创建事务管理器
 @Bean
 public DataSourceTransactionManager
getDataSourceTransactionManager(DataSource dataSource) &#123;
 DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();
 transactionManager.setDataSource(dataSource);
 return transactionManager;
 &#125;
&#125;
</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> 轉載請注明來源，歡迎對文章中的引用來源進行考證，歡迎指出任何有錯誤或不夠清晰的表達。可以郵件至 b8954008@gmail.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2023-2030 Eker
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
